<!-- Panding Issues Table -->
<h6 class="tablabel">Pending Issues</h6>
<table mat-table [dataSource]="dataSource" class="w-100" matSort>
    <!-- Request No Column -->
    <ng-container matColumnDef="req_no">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> <b class="clrblack">Request No </b> </th>
        <td mat-cell *matCellDef="let row" (click)="supportPreview(previewModal,row.support_id)" class="cursor">
            {{row.ticket_no}}
        </td>
    </ng-container>
    <!-- Name Column -->
    <ng-container matColumnDef="req_name">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> <b class="clrblack">Request Name </b> </th>
        <td mat-cell *matCellDef="let row"> {{row.issue_name}} </td>
    </ng-container>
    <!-- Request Type Column -->
    <ng-container matColumnDef="request_type">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> <b class="clrblack">Request Type</b> </th>
        <td mat-cell *matCellDef="let row"> {{row.request_type.request_name}} </td>
    </ng-container>
    <!-- Priority Column -->
    <ng-container matColumnDef="priority">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> <b class="clrblack text-right">Priority</b> </th>
        <td mat-cell *matCellDef="let row">{{row.priority_type.priority_name}}</td>
    </ng-container>
    <!-- Comments Column -->
    <ng-container matColumnDef="comments">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> <b class="clrblack text-right">Comments</b> </th>
        <td mat-cell *matCellDef="let row">
            <ng-container *ngIf="row.comments != ''">
                {{row.comments}}
            </ng-container>
            <ng-container *ngIf="row.comments == '' || row.comments == null">
                --
            </ng-container>
        </td>
    </ng-container>
    <!-- Request Date Column -->
    <ng-container matColumnDef="req_date">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> <b class="clrblack text-right">Requested Date</b> </th>
        <td mat-cell *matCellDef="let row">{{row.created_at | date:'short'}}</td>
    </ng-container>
    <!-- Request By Column -->
    <ng-container matColumnDef="created_by">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> <b class="clrblack text-right">Created By</b> </th>
        <td mat-cell *matCellDef="let row">{{row.created_by}}</td>
    </ng-container>
    <!-- Modified Date Column -->
    <ng-container matColumnDef="modified_date">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> <b class="clrblack text-right">Last Modified Date</b>
        </th>
        <td mat-cell *matCellDef="let row">{{row.modified_at | date:'short'}}</td>
    </ng-container>
    <!-- Modified By Column -->
    <ng-container matColumnDef="modified_by">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> <b class="clrblack text-right">Last Modified By</b>
        </th>
        <td mat-cell *matCellDef="let row">{{row.modified_by}}</td>
    </ng-container>

    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

    <!-- Row shown when there is no matching data. -->
    <tr class="mat-row" *matNoDataRow>
        <td class="mat-cell" colspan="4">No data matching the filter</td>
    </tr>
</table>
<div>
    <mat-paginator class="paginator--right" #paginator [length]="count" (page)="pageEvent($event)" [pageSize]="limit"
        [pageIndex]="pageIndex" [pageSizeOptions]="[5,10,20,50,100]" [showFirstLastButtons]="true">
    </mat-paginator>
</div>

<!-- Support Preview Popup -->
<ng-template #previewModal let-modal>
    <div class="modal-header">
        <h6 class="modal-title" id="modal-basic-title">Support Preview</h6>
        <button type="button" class="close" aria-label="Close" (click)="modal.dismiss('Cross click')">
            <span aria-hidden="true">Ã—</span>
        </button>
    </div>
    <div class="modal-body prodscroll">
        <div class="form-group">
            <label class="reqlabel">Request No</label><span class="reqnumber">:</span>
            <span class="issuename">{{requestNo}}</span>
        </div>
        <div class="form-group">
            <label class="reqlabel">Request Title</label><span class="reqtitle">:</span>
            <span class="issuename">{{requestName}}</span>
        </div>
        <div class="form-group">
            <label class="reqlabel">Request Type</label><span class="reqtype">:</span>
            <span class="issuename">{{requestType}}</span>
        </div>
        <div class="form-group">
            <label class="reqlabel">Priority</label><span class="priority">:</span>
            <span class="issuename">{{priorityType}}</span>
        </div>
        <div class="form-group">
            <label class="reqlabel">Notes</label><span class="comments">:</span>
            <ng-container *ngIf="comments == '' || comments == null">
                <span class="issuename"> -- </span>
            </ng-container>
            <ng-container *ngIf="comments != ''">
                <span class="issuename">{{comments}}</span>
            </ng-container>
        </div>
        <div class="form-group">
            <label class="reqlabel">Status</label><span class="status">:</span>
            <span class="issuename">{{requestStatus}}</span>
        </div>
    </div>
    <div class="modal-footer">
        <a class="save_cancel" (click)="modal.close('Save click')">Cancel</a>
        <!-- <a class="save_yes" (click)="updateStatusDTO()" *ngIf="canUpdate">Closed</a> -->
        <button mat-button color="warn" class="save_yes" *ngIf="canUpdate" (click)="updateStatusDTO()">Closed</button>
    </div>
</ng-template>