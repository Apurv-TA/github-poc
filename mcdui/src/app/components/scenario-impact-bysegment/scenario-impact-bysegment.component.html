<!-- Segment Dropdown -->
<label class="kpilabel">{{'lang.discount_config.kpiType' | translate}}</label>
<mat-select class="segment_dropdown" name="segment" placeholder="Segment" (selectionChange)="onSelectionChange($event)"
    [(ngModel)]="selectedSegment" [(value)]="selectedSegment">
    <mat-option [value]="1">{{'lang.rec_discount.change' | translate}}</mat-option>
    <mat-option [value]="2">{{'lang.rec_discount.value' | translate}}</mat-option>
</mat-select>
<!-- Segment Table -->
<h6 class="tablabel">{{'lang.discount_config.segment' | translate}}</h6>
<span class="viewkpi" (click)="viewKpi()">({{'lang.help.viewKpi' | translate}})</span>
<table mat-table [dataSource]="dataSource" class="w-100" matSort>
    <!-- segment ID Column -->
    <ng-container matColumnDef="serial_no">
        <th mat-header-cell *matHeaderCellDef> <b class="clrblack">{{'lang.discount_config.sl' |
                translate}} </b> </th>
        <td mat-cell *matCellDef="let i=index"> {{i+1 + (paginator.pageIndex * paginator.pageSize)}} </td>
    </ng-container>
    <!-- segment name Column -->
    <ng-container matColumnDef="granularity_value">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> <b class="clrblack">{{'lang.rec_discount.segment' |
                translate}}</b> </th>
        <td mat-cell *matCellDef="let row"> {{row.granularity_value}} </td>
        <!-- <td mat-cell *matCellDef="let row"> {{row.granularity_value}} </td> -->
    </ng-container>
    <!-- GC Column -->
    <ng-container matColumnDef="gc_lift">
        <th mat-header-cell *matHeaderCellDef mat-sort-header class="thwidth"> <b
                class="clrblack text-right">{{'lang.discount_config.gc' | translate}}<span
                    *ngIf="selectedSegment == 1">(%)</span></b> </th>

        <td mat-cell *matCellDef="let row">
            <span class="rightalign" *ngIf="selectedSegment == 1 && row.gc_lift != null">{{fixedFormat(row.gc_lift)}}</span>
            <span class="rightalign" *ngIf="selectedSegment == 1 && row.gc_lift == null">-</span>
            <span class="rightalign" *ngIf="selectedSegment == 2 && row.gc_scenario == null">-</span>
            <span class="rightalign" *ngIf="selectedSegment == 2 && row.gc_scenario != null">{{row.gc_scenario |
                currencyformat}}</span>
        </td>

    </ng-container>
    <!-- UG Column -->
    <!-- <ng-container matColumnDef="uc_change">
        <th mat-header-cell *matHeaderCellDef mat-sort-header> <b
                class="clrblack text-right">{{'lang.discount_config.uc' | translate}}</b> </th>
        <td mat-cell *matCellDef="let row">
            {{selectedSegment == 2 ? row.uc_scenario : row.uc_lift}} <span
                *ngIf="selectedSegment == 1 && row.uc_lift != null">%</span>
        </td>
    </ng-container> -->
    <!-- Avg Check Column -->
    <ng-container matColumnDef="avg_lift">
        <th mat-header-cell *matHeaderCellDef mat-sort-header class="thwidth thwidthnet"> <b
                class="clrblack text-right">{{'lang.discount_config.avgcheck' | translate}}<span
                    *ngIf="selectedSegment == 1">(%)</span>
                <span *ngIf="selectedSegment == 2">({{currencyCode}})</span></b> </th>

        <td mat-cell *matCellDef="let row"><span class="rightalign"
                *ngIf="selectedSegment == 1 && row.avg_lift != null">{{fixedFormat(row.avg_lift)}}</span>
            <span class="rightalign" *ngIf="selectedSegment == 1 && row.avg_lift == null">-</span>
            <span class="rightalign" *ngIf="selectedSegment == 2 && row.avg_scenario == null">-</span>
            <span class="rightalign" *ngIf="selectedSegment == 2 && row.avg_scenario != null">{{row.avg_scenario
                |currencyformat}}</span>
        </td>

    </ng-container>
    <!-- GP Change Column -->
    <ng-container matColumnDef="gp_lift">
        <th mat-header-cell *matHeaderCellDef mat-sort-header class="thwidth"> <b
                class="clrblack text-right">{{'lang.discount_config.gp' | translate}}<span
                    *ngIf="selectedSegment == 1">(%)</span>
                <span *ngIf="selectedSegment == 2">({{currencyCode}})</span></b> </th>
        <td mat-cell *matCellDef="let row"> <span class="rightalign"
                *ngIf="selectedSegment == 1 && row.gp_lift != null">{{fixedFormat(row.gp_lift)}}</span>
            <span class="rightalign" *ngIf="selectedSegment == 1 && row.gp_lift == null">-</span>
            <span class="rightalign" *ngIf="selectedSegment == 2 && row.gp_scenario == null">-</span>
            <span class="rightalign" *ngIf="selectedSegment == 2 && row.gp_scenario != null">{{row.gp_scenario
                |currencyformat}}</span>
        </td>

    </ng-container>
    <!-- Net Sales Column -->
    <ng-container matColumnDef="netsales_lift">
        <th mat-header-cell *matHeaderCellDef mat-sort-header class="thwidth thwidthupt"> <b
                class="clrblack text-right">{{'lang.discount_config.netsale' | translate}}<span
                    *ngIf="selectedSegment == 1">(%)</span>
                <span *ngIf="selectedSegment == 2">({{currencyCode}})</span></b> </th>

        <td mat-cell *matCellDef="let row"> <span class="rightalign"
                *ngIf="selectedSegment == 1 && row.netsales_lift != null">{{fixedFormat(row.netsales_lift)}}</span>
            <span class="rightalign" *ngIf="selectedSegment == 1 && row.netsales_lift == null">-</span>
            <span class="rightalign" *ngIf="selectedSegment == 2 && row.netsales_scenario == null">-</span>
            <span class="rightalign"
                *ngIf="selectedSegment == 2 && row.netsales_scenario != null">{{row.netsales_scenario |
                currencyformat}}</span>
        </td>

    </ng-container>
    <!-- Avg Check Column -->
    <ng-container matColumnDef="effect_on_margin_lift">
        <th mat-header-cell *matHeaderCellDef mat-sort-header class="thwidth"> <b
                class="clrblack text-right">{{'lang.discount_config.effectmarg' | translate}}<span
                    *ngIf="selectedSegment == 1">(%)</span></b>
        </th>

        <td mat-cell *matCellDef="let row"> <span class="rightalign"
                *ngIf="selectedSegment == 1 && row.effect_on_margin_lift != null">{{fixedFormat(row.effect_on_margin_lift)}}</span>
            <span class="rightalign" *ngIf="selectedSegment == 1 && row.effect_on_margin_lift == null">-</span>
            <span class="rightalign" *ngIf="selectedSegment == 2 && row.effect_on_margin_scenario == null">-</span>
            <span class="rightalign"
                *ngIf="selectedSegment == 2 && (row.effect_on_margin_scenario != null && row.effect_on_margin_scenario!=0)">{{row.effect_on_margin_scenario
                | currencyformat}}</span>
            <span class="rightalign"
                *ngIf="selectedSegment == 2 && (row.effect_on_margin_scenario != null && row.effect_on_margin_scenario==0)">-</span>

        </td>

    </ng-container>
    <!-- GP Change Column -->
    <ng-container matColumnDef="upt_lift">
        <th mat-header-cell *matHeaderCellDef mat-sort-header class="thwidth thwidthupt"> <b
                class="clrblack text-right">{{'lang.discount_config.upt' | translate}}<span
                    *ngIf="selectedSegment == 1">(%)</span></b>
        </th>

        <td mat-cell *matCellDef="let row"> <span class="rightalign"
                *ngIf="selectedSegment == 1 && row.upt_lift != null">{{fixedFormat(row.upt_lift)}}</span>
            <span class="rightalign" *ngIf="selectedSegment == 1 && row.upt_lift == null">-</span>
            <span class="rightalign" *ngIf="selectedSegment == 2 && row.upt_scenario == null">-</span>
            <span class="rightalign" *ngIf="selectedSegment == 2 && row.upt_scenario != null">{{row.upt_scenario |
                currencyformat}}</span>

        </td>

    </ng-container>
    <!-- Net Sales Column -->
    <ng-container matColumnDef="urw_lift">
        <th mat-header-cell *matHeaderCellDef mat-sort-header class="thwidth"> <b
                class="clrblack text-right">{{'lang.discount_config.urw' | translate}}<span
                    *ngIf="selectedSegment == 1">(%)</span></b>
        </th>

        <td mat-cell *matCellDef="let row"> <span class="rightalign"
                *ngIf="selectedSegment == 1 && row.urw_lift != null">{{fixedFormat(row.urw_lift)}}</span>
            <span class="rightalign" *ngIf="selectedSegment == 1 && row.urw_lift == null">-</span>
            <span class="rightalign" *ngIf="selectedSegment == 2 && row.urw_scenario == null">-</span>
            <span class="rightalign" *ngIf="selectedSegment == 2 && row.urw_scenario != null">{{row.urw_scenario |
                currencyformat}}</span>

        </td>

    </ng-container>


    <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
    <tr mat-row *matRowDef="let row; columns: displayedColumns;"></tr>

    <!-- Row shown when there is no matching data. -->
    <tr class="mat-row" *matNoDataRow>
        <td class="mat-cell" colspan="4">No data matching the filter</td>
    </tr>
</table>
<div>
    <div class="note" *ngIf="selectedSegment == 1"><i>*{{impactNote}}*</i></div>
    <mat-paginator #paginator [pageSizeOptions]="[5, 10, 25, 100]" [pageSize]="5">
    </mat-paginator>
</div>